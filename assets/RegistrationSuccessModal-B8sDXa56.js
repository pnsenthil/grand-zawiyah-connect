import{r as j,j as e,l as O,p as v,D as w,B as f,M}from"./index-DvwH0SUZ.js";import{I as m}from"./input-Dr0z7DXz.js";import{L as l}from"./label-BzR_Dta3.js";import{C}from"./checkbox-Benqdtvr.js";import{D as T,a as R,b as P,c as E,d as $,e as D}from"./dialog-Bv2EhJCG.js";import{C as k}from"./calendar-BJ-JccOL.js";import{C as A}from"./clock-CIg_5BHc.js";import{U}from"./users-BGdl-TlQ.js";import{D as q}from"./download-l_SpPqco.js";const I=j.forwardRef(({className:a,...r},d)=>e.jsx("textarea",{className:O("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:d,...r}));I.displayName="Textarea";const Q=({event:a,isOpen:r,onClose:d,onConfirm:x})=>{const[i,g]=j.useState({firstName:"",lastName:"",email:"",phone:"",emergencyContact:"",emergencyPhone:"",dietaryRestrictions:"",accessibilityNeeds:"",additionalNotes:"",agreeToTerms:!1,agreeToPhotos:!1}),[h,N]=j.useState(!1),[t,c]=j.useState({});if(!a)return null;const y=s=>new Date(s).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=s=>new Date(`2000-01-01T${s}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),o=()=>a.maxAttendees?a.maxAttendees-(a.registered||0):null,S=()=>new Date(a.date)>new Date,F=()=>{const s={};return i.firstName.trim()||(s.firstName="First name is required"),i.lastName.trim()||(s.lastName="Last name is required"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(s.email="Please enter a valid email"):s.email="Email is required",i.phone.trim()||(s.phone="Phone number is required"),i.emergencyContact.trim()||(s.emergencyContact="Emergency contact is required"),i.emergencyPhone.trim()||(s.emergencyPhone="Emergency contact phone is required"),i.agreeToTerms||(s.agreeToTerms="You must agree to the terms and conditions"),c(s),Object.keys(s).length===0},L=async s=>{s.preventDefault(),F()&&(N(!0),await new Promise(p=>setTimeout(p,1e3)),x(i),N(!1))},n=(s,p)=>{g(b=>({...b,[s]:p})),t[s]&&c(b=>({...b,[s]:void 0}))};return e.jsx(T,{open:r,onOpenChange:d,children:e.jsxs(R,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(P,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5 text-primary"}),"Register for Event"]}),e.jsxs($,{children:['Complete the form below to register for "',a.title,'"']})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:a.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:y(a.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:u(a.time)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:a.location})]}),a.maxAttendees&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{children:[o()," spots remaining"]})]})]})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"firstName",children:"First Name *"}),e.jsx(m,{id:"firstName",value:i.firstName,onChange:s=>n("firstName",s.target.value),className:t.firstName?"border-red-500":""}),t.firstName&&e.jsx("p",{className:"text-sm text-red-500",children:t.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(m,{id:"lastName",value:i.lastName,onChange:s=>n("lastName",s.target.value),className:t.lastName?"border-red-500":""}),t.lastName&&e.jsx("p",{className:"text-sm text-red-500",children:t.lastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email Address *"}),e.jsx(m,{id:"email",type:"email",value:i.email,onChange:s=>n("email",s.target.value),className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-sm text-red-500",children:t.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(m,{id:"phone",type:"tel",value:i.phone,onChange:s=>n("phone",s.target.value),className:t.phone?"border-red-500":""}),t.phone&&e.jsx("p",{className:"text-sm text-red-500",children:t.phone})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"emergencyContact",children:"Emergency Contact Name *"}),e.jsx(m,{id:"emergencyContact",value:i.emergencyContact,onChange:s=>n("emergencyContact",s.target.value),className:t.emergencyContact?"border-red-500":""}),t.emergencyContact&&e.jsx("p",{className:"text-sm text-red-500",children:t.emergencyContact})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"emergencyPhone",children:"Emergency Contact Phone *"}),e.jsx(m,{id:"emergencyPhone",type:"tel",value:i.emergencyPhone,onChange:s=>n("emergencyPhone",s.target.value),className:t.emergencyPhone?"border-red-500":""}),t.emergencyPhone&&e.jsx("p",{className:"text-sm text-red-500",children:t.emergencyPhone})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Additional Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"dietaryRestrictions",children:"Dietary Restrictions"}),e.jsx(m,{id:"dietaryRestrictions",value:i.dietaryRestrictions,onChange:s=>n("dietaryRestrictions",s.target.value),placeholder:"Any dietary restrictions or allergies"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"accessibilityNeeds",children:"Accessibility Needs"}),e.jsx(m,{id:"accessibilityNeeds",value:i.accessibilityNeeds,onChange:s=>n("accessibilityNeeds",s.target.value),placeholder:"Any accessibility accommodations needed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"additionalNotes",children:"Additional Notes"}),e.jsx(I,{id:"additionalNotes",value:i.additionalNotes,onChange:s=>n("additionalNotes",s.target.value),placeholder:"Any additional information or questions",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Terms and Conditions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(C,{id:"agreeToTerms",checked:i.agreeToTerms,onCheckedChange:s=>n("agreeToTerms",s)}),e.jsxs(l,{htmlFor:"agreeToTerms",className:"text-sm",children:["I agree to the ",e.jsx("a",{href:"#",className:"text-primary underline",children:"Terms and Conditions"})," and ",e.jsx("a",{href:"#",className:"text-primary underline",children:"Privacy Policy"})," *"]})]}),t.agreeToTerms&&e.jsx("p",{className:"text-sm text-red-500",children:t.agreeToTerms}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(C,{id:"agreeToPhotos",checked:i.agreeToPhotos,onCheckedChange:s=>n("agreeToPhotos",s)}),e.jsx(l,{htmlFor:"agreeToPhotos",className:"text-sm",children:"I consent to being photographed or recorded during the event for promotional purposes"})]})]})]}),e.jsxs(D,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:d,disabled:h,children:"Cancel"}),e.jsx(f,{type:"submit",disabled:h||!S()||a.maxAttendees&&o()===0,className:"min-w-[120px]",children:h?"Registering...":"Confirm Registration"})]})]})]})})},V=({event:a,registrationData:r,isOpen:d,onClose:x,onDownloadConfirmation:i})=>{if(!a||!r)return null;const g=c=>new Date(c).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=c=>new Date(`2000-01-01T${c}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),N=()=>`
GRAND ZAWIYAH CONNECT
Event Registration Confirmation

Registration ID: ${a.id}-${Date.now()}
Event: ${a.title}
Date: ${g(a.date)}
Time: ${h(a.time)}
Location: ${a.location}

REGISTRANT INFORMATION:
Name: ${r.firstName} ${r.lastName}
Email: ${r.email}
Phone: ${r.phone}

EMERGENCY CONTACT:
Name: ${r.emergencyContact}
Phone: ${r.emergencyPhone}

ADDITIONAL INFORMATION:
${r.dietaryRestrictions?`Dietary Restrictions: ${r.dietaryRestrictions}`:""}
${r.accessibilityNeeds?`Accessibility Needs: ${r.accessibilityNeeds}`:""}
${r.additionalNotes?`Additional Notes: ${r.additionalNotes}`:""}

IMPORTANT REMINDERS:
- Please arrive 15 minutes before the event starts
- Bring a valid ID for verification
- Contact us if you need to cancel or make changes
- Check your email for any updates or changes

Thank you for registering with Grand Zawiyah Connect!
For questions, contact: events@grandzawiyah.org

This confirmation was generated on ${new Date().toLocaleString()}
    `.trim(),t=()=>{const c=N(),y=new Blob([c],{type:"text/plain"}),u=URL.createObjectURL(y),o=document.createElement("a");o.href=u,o.download=`event-registration-${a.id}-${r.firstName}-${r.lastName}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(u),i()};return e.jsx(T,{open:d,onOpenChange:x,children:e.jsxs(R,{className:"max-w-2xl",children:[e.jsxs(P,{children:[e.jsxs(E,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(v,{className:"h-6 w-6"}),"Registration Successful!"]}),e.jsxs($,{children:['You have successfully registered for "',a.title,'"']})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Registration Confirmed"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Thank you, ",r.firstName,"! Your registration has been confirmed. You will receive a confirmation email shortly at ",r.email,"."]})]})]})}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:g(a.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:h(a.time)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{children:["Confirmation sent to ",r.email]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Important Reminders"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Please arrive 15 minutes before the event starts"}),e.jsx("li",{children:"• Bring a valid ID for verification"}),e.jsx("li",{children:"• Contact us if you need to cancel or make changes"}),e.jsx("li",{children:"• Check your email for any updates or changes"})]})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"For questions or changes, contact us at:"}),e.jsx("p",{className:"font-medium",children:"events@grandzawiyah.org"})]})]}),e.jsxs(D,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(f,{variant:"outline",onClick:t,className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Download Confirmation"]}),e.jsx(f,{onClick:x,children:"Close"})]})]})})};export{Q as E,V as R};
